var d=document,uploadQueObj={filesVar:{},types:["jpg","png","bmp","jpeg"],fileChange:function(e){for(var t=this.files,a=uploadQueObj.getFormName(e),u=this.name,n=0;n<t.length;n++){var l=t[n],r=l.name,d=r.lastIndexOf(".")+1,o=r.substring(d,r.length);-1!=uploadQueObj.types.indexOf(o)&&(uploadQueObj.filesVar[a][u][r]=l)}uploadQueObj.buildQueue(e)},deleteQueueEntry:function(e){var t=this.getAttribute("data-input-name"),a=this.getAttribute("data-file-name"),u=uploadQueObj.getFormName(e);delete uploadQueObj.filesVar[u][t][a],uploadQueObj.buildQueue(e)},getFormName:function(e){for(var t=e.target;"FORM"!=t.nodeName&&t.parentNode;)t=t.parentNode;return t.getAttribute("data-form-name")},buildQueue:function(e){var t=uploadQueObj.getFormName(e),a=uploadQueObj.filesVar[t],u=Object.keys(a),n=e.target.parentNode.parentNode.lastChild;"uploadQueue-queue-element"==n.className&&(n=n.parentNode),n.innerHTML="";for(var l=0;l<u.length;l++)for(var r=u[l],o=Object.keys(a[r]),i=a[r],p=0;p<o.length;p++){var m=i[o[p]],s=m.name,f=d.createElement("div"),h=d.createElement("div"),b=d.createElement("p");h.className="uploadQueue-queue-element",b.className="uploadQueue-queue-element-name",b.innerText=s,f.setAttribute("data-input-name",r),f.setAttribute("data-file-name",s),f.className="uploadQueue-queue-element-delete",f.innerText="X",f.addEventListener("click",uploadQueObj.deleteQueueEntry),h.appendChild(b),h.appendChild(f),n.appendChild(h)}},getFormData:function(e,t){for(var a=new FormData(t),u=uploadQueObj.getFormName(e),n=uploadQueObj.filesVar[u],l=Object.keys(n),r=0;r<l.length;r++)for(var o=l[r],i=Object.keys(n[o]),p=n[o],m=(d.createElement("input"),0);m<i.length;m++){var s=i[m],f=p[s];a.append(o+"["+m+"]",f)}return a}};Element.prototype.getFormData=function(e){var t={target:this};return uploadQueObj.getFormData(t,e)},Element.prototype.uploadQue=function(){if(""==this.name)return console.error("Name attribute is not defined in element"),void console.log(this);var e="uploadQueue-"+Date.now()+Math.floor(2e3*Math.random()+1);uploadQueObj.filesVar[e]={},uploadQueObj.filesVar[e][this.name]={};var t=this.cloneNode(!0),a=d.createElement("div"),u=d.createElement("div"),n=d.createElement("div");a.className="uploadQueue-holder",u.className="uploadQueue-file-holder",n.className="uploadQueue-queue-holder",u.appendChild(t),a.appendChild(u),a.appendChild(n),this.form.addEventListener("getFormData",uploadQueObj.getFormData),this.form.setAttribute("data-form-name",e),t.addEventListener("change",uploadQueObj.fileChange),this.parentNode.replaceChild(a,this)};